<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Universal Dev Studio - PC & Mobile Apps</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); 
            color: #ffffff; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }
        
        /* HEADER VIS√çVEL E BONITO */
        .header { 
            background: linear-gradient(135deg, #0f3460 0%, #1a237e 100%); 
            border-bottom: 3px solid #3DDC84; 
            padding: 12px 20px; 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .logo { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            font-weight: bold; 
            font-size: 1.2em; 
            color: #3DDC84; 
            padding: 5px 15px; 
            background: rgba(61, 220, 132, 0.1); 
            border-radius: 8px; 
            border: 2px solid rgba(61, 220, 132, 0.3); 
        }
        
        .nav-btn { 
            background: transparent; 
            color: #e0e0e0; 
            border: 2px solid transparent; 
            padding: 10px 20px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 500; 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            transition: all 0.3s ease; 
        }
        
        .nav-btn:hover { 
            background: rgba(61, 220, 132, 0.15); 
            color: #3DDC84; 
            border-color: rgba(61, 220, 132, 0.3); 
            transform: translateY(-2px); 
        }
        
        .nav-btn.active { 
            background: rgba(61, 220, 132, 0.25); 
            color: #3DDC84; 
            border-color: #3DDC84; 
            box-shadow: 0 0 15px rgba(61, 220, 132, 0.4); 
        }
        
        /* BOT√ïES VIS√çVEIS E BONITOS */
        .btn { 
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); 
        }
        
        .btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5); 
        }
        
        .btn-secondary { 
            background: linear-gradient(135deg, #2196F3 0%, #0D47A1 100%); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3); 
        }
        
        .btn-secondary:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5); 
        }
        
        .btn-warning { 
            background: linear-gradient(135deg, #FF9800 0%, #EF6C00 100%); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3); 
        }
        
        .btn-danger { 
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3); 
        }
        
        .spacer { 
            flex: 1; 
        }
        
        /* MAIN LAYOUT VIS√çVEL */
        .main { 
            display: flex; 
            flex: 1; 
            overflow: hidden; 
            background: #0f3460; 
        }
        
        /* SIDEBAR VIS√çVEL E BONITA */
        .sidebar { 
            width: 300px; 
            background: linear-gradient(180deg, #16213e 0%, #0f3460 100%); 
            border-right: 3px solid #3DDC84; 
            padding: 20px; 
            overflow-y: auto; 
            box-shadow: 5px 0 15px rgba(0,0,0,0.3); 
            z-index: 100;
        }
        
        .sidebar-title { 
            color: #3DDC84; 
            font-weight: bold; 
            margin: 25px 0 15px; 
            font-size: 1em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            padding: 10px 0; 
            border-bottom: 2px solid rgba(61, 220, 132, 0.5); 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }
        
        /* TOOL ITEMS VIS√çVEIS */
        .tool-item { 
            padding: 15px; 
            background: linear-gradient(135deg, rgba(61, 220, 132, 0.1) 0%, rgba(61, 220, 132, 0.05) 100%); 
            border: 2px solid rgba(61, 220, 132, 0.2); 
            border-radius: 10px; 
            cursor: grab; 
            margin-bottom: 12px; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            transition: all 0.3s ease; 
            position: relative; 
            color: #e0e0e0; 
            font-weight: 500; 
        }
        
        .tool-item:hover { 
            background: linear-gradient(135deg, rgba(61, 220, 132, 0.2) 0%, rgba(61, 220, 132, 0.1) 100%); 
            border-color: #3DDC84; 
            transform: translateX(8px); 
            box-shadow: 0 8px 25px rgba(61, 220, 132, 0.4); 
            color: #ffffff; 
        }
        
        .tool-item:active { 
            cursor: grabbing; 
            transform: translateX(8px) scale(0.98); 
        }
        
        /* CENTER AREA VIS√çVEL */
        .center { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            background: #1a1a2e; 
        }
        
        /* TABS VIS√çVEIS E BONITAS */
        .tabs { 
            display: flex; 
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%); 
            border-bottom: 3px solid #3DDC84; 
            overflow-x: auto; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
        }
        
        .tab { 
            padding: 18px 30px; 
            cursor: pointer; 
            color: #a0a0a0; 
            border-right: 1px solid rgba(0,0,0,0.2); 
            white-space: nowrap; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            transition: all 0.3s ease; 
            font-weight: 600; 
            font-size: 0.95em; 
            background: rgba(255,255,255,0.05); 
        }
        
        .tab:hover { 
            background: rgba(61, 220, 132, 0.1); 
            color: #e0e0e0; 
        }
        
        .tab.active { 
            background: linear-gradient(135deg, rgba(61, 220, 132, 0.2) 0%, rgba(61, 220, 132, 0.1) 100%); 
            color: #3DDC84; 
            border-bottom: 3px solid #3DDC84; 
            box-shadow: inset 0 -2px 10px rgba(61, 220, 132, 0.3); 
        }
        
        .content { 
            flex: 1; 
            display: none; 
            padding: 20px; 
        }
        
        .content.active { 
            display: flex; 
        }
        
        /* DESIGNER AREA VIS√çVEL */
        .designer { 
            background: linear-gradient(135deg, #263238 0%, #37474F 100%); 
            padding: 25px; 
            overflow: auto; 
            justify-content: center; 
            align-items: center; 
            position: relative; 
            border-radius: 15px; 
            margin: 10px; 
            box-shadow: inset 0 0 30px rgba(0,0,0,0.5); 
        }
        
        /* DEVICE SELECTOR VIS√çVEL */
        .device-selector { 
            position: absolute; 
            top: 25px; 
            left: 25px; 
            z-index: 1000; 
            display: flex; 
            gap: 15px; 
            background: rgba(15, 52, 96, 0.9); 
            padding: 15px; 
            border-radius: 15px; 
            border: 3px solid #3DDC84; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.5); 
        }
        
        .device-btn { 
            padding: 15px 25px; 
            background: rgba(61, 220, 132, 0.1); 
            border: 2px solid rgba(61, 220, 132, 0.3); 
            border-radius: 10px; 
            color: white; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            font-weight: 600; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            font-size: 1em; 
        }
        
        .device-btn:hover { 
            background: rgba(61, 220, 132, 0.2); 
            transform: translateY(-3px); 
        }
        
        .device-btn.active { 
            background: linear-gradient(135deg, #3DDC84 0%, #2ECC71 100%); 
            color: #0d0d0d; 
            border-color: #3DDC84; 
            box-shadow: 0 5px 20px rgba(61, 220, 132, 0.6); 
            font-weight: bold; 
        }
        
        /* PC FRAME VIS√çVEL */
        .pc-frame { 
            width: 850px; 
            height: 650px; 
            background: linear-gradient(135deg, #333 0%, #000 100%); 
            border-radius: 20px; 
            padding: 25px; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.8); 
            position: relative; 
            border: 15px solid #222; 
            display: block; 
        }
        
        .pc-screen { 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%); 
            border-radius: 12px; 
            position: relative; 
            overflow: hidden; 
            border: 2px solid #333; 
        }
        
        .pc-title-bar {
            height: 40px;
            background: linear-gradient(135deg, #0078D7 0%, #005A9E 100%);
            color: white;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 15px;
            font-weight: bold;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        /* PHONE FRAME VIS√çVEL */
        .phone-frame { 
            width: 400px; 
            height: 700px; 
            background: linear-gradient(135deg, #333 0%, #000 100%); 
            border-radius: 40px; 
            padding: 20px; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.8); 
            position: relative; 
            border: 15px solid #222; 
            display: none; 
        }
        
        .phone-screen { 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%); 
            border-radius: 30px; 
            position: relative; 
            overflow: hidden; 
            border: 2px solid #333; 
        }
        
        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 25px;
            background: #000;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .status-bar {
            height: 30px;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            position: relative;
            z-index: 1001;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }
        
        /* COMPONENTES VIS√çVEIS */
        .universal-component {
            position: absolute;
            cursor: move;
            border: 3px solid transparent;
            user-select: none;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
            border-radius: 8px;
        }
        
        .universal-component.selected { 
            border-color: #3DDC84 !important; 
            box-shadow: 0 0 0 4px rgba(61, 220, 132, 0.4), 0 0 30px rgba(61, 220, 132, 0.6);
            z-index: 10000;
        }
        
        /* HANDLES DE REDIMENSIONAMENTO VIS√çVEIS */
        .resize-handle {
            position: absolute;
            width: 20px !important;
            height: 20px !important;
            background: #3DDC84 !important;
            border: 3px solid white !important;
            border-radius: 50% !important;
            display: none !important;
            z-index: 10001 !important;
            cursor: pointer !important;
            box-shadow: 0 3px 8px rgba(0,0,0,0.7) !important;
        }
        
        .universal-component.selected .resize-handle {
            display: block !important;
        }
        
        .resize-nw { top: -10px; left: -10px; cursor: nwse-resize; }
        .resize-ne { top: -10px; right: -10px; cursor: nesw-resize; }
        .resize-sw { bottom: -10px; left: -10px; cursor: nesw-resize; }
        .resize-se { bottom: -10px; right: -10px; cursor: nwse-resize; }
        .resize-n { top: -10px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
        .resize-s { bottom: -10px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
        .resize-w { left: -10px; top: 50%; transform: translateY(-50%); cursor: ew-resize; }
        .resize-e { right: -10px; top: 50%; transform: translateY(-50%); cursor: ew-resize; }
        
        /* ESTILOS DOS COMPONENTES */
        .component-button {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            font-size: 15px;
            min-width: 120px;
            min-height: 50px;
            box-shadow: 0 6px 15px rgba(33, 150, 243, 0.4);
            transition: all 0.3s ease;
        }
        
        .component-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.6);
        }
        
        .component-label {
            color: #212121;
            padding: 12px;
            font-size: 17px;
            display: flex;
            align-items: center;
            min-width: 100px;
            min-height: 40px;
            font-weight: 500;
        }
        
        .component-textbox {
            background: white;
            border: 3px solid #BDBDBD;
            border-radius: 10px;
            padding: 12px 18px;
            color: #212121;
            font-size: 15px;
            resize: none;
            outline: none;
            min-width: 200px;
            min-height: 45px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .component-textbox:focus {
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
        }
        
        /* PROPRIEDADES VIS√çVEIS */
        .props { 
            width: 350px; 
            background: linear-gradient(180deg, #16213e 0%, #0f3460 100%); 
            padding: 25px; 
            border-left: 3px solid #3DDC84; 
            overflow-y: auto; 
            box-shadow: -5px 0 15px rgba(0,0,0,0.3); 
            z-index: 100;
        }
        
        .prop-section { 
            margin-bottom: 30px; 
            background: rgba(255,255,255,0.05); 
            padding: 20px; 
            border-radius: 12px; 
            border: 2px solid rgba(61, 220, 132, 0.2); 
        }
        
        .prop-section-title { 
            color: #3DDC84; 
            margin-bottom: 15px; 
            font-size: 1.05em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            font-weight: 600; 
        }
        
        .prop-row { 
            margin-bottom: 18px; 
        }
        
        .prop-row label { 
            display: block; 
            margin-bottom: 8px; 
            font-size: 0.92em; 
            color: #b0b0b0; 
            font-weight: 500; 
        }
        
        .prop-row input, .prop-row select, .prop-row textarea { 
            width: 100%; 
            background: rgba(255,255,255,0.1); 
            color: white; 
            border: 2px solid rgba(61, 220, 132, 0.3); 
            padding: 12px; 
            border-radius: 8px; 
            transition: all 0.3s ease; 
            font-size: 0.95em; 
        }
        
        .prop-row input:focus, .prop-row select:focus, .prop-row textarea:focus { 
            border-color: #3DDC84; 
            outline: none; 
            box-shadow: 0 0 0 3px rgba(61, 220, 132, 0.3); 
            background: rgba(255,255,255,0.15); 
        }
        
        .prop-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
        }
        
        /* CODE EDITOR VIS√çVEL */
        .code-view { 
            display: flex; 
            overflow: hidden; 
            background: #1a1a2e; 
            border-radius: 12px; 
            border: 3px solid #0f3460; 
            margin: 10px;
        }
        
        .line-nums { 
            width: 50px; 
            background: #0f3460; 
            padding: 20px 10px; 
            text-align: right; 
            color: #a0a0a0; 
            font-family: 'Consolas', monospace; 
            font-size: 0.95em; 
            line-height: 1.6; 
        }
        
        .code-editor { 
            flex: 1; 
            padding: 20px; 
            overflow: auto; 
            font-family: 'Consolas', monospace; 
            font-size: 1em; 
            line-height: 1.6; 
            white-space: pre; 
            outline: none; 
            background: #1a1a2e; 
            color: #e0e0e0; 
        }
        
        /* CONSOLE VIS√çVEL */
        .console { 
            height: 180px; 
            background: linear-gradient(135deg, #0f3460 0%, #16213e 100%); 
            overflow-y: auto; 
            border-top: 3px solid #3DDC84; 
            border-radius: 12px 12px 0 0;
            margin: 10px 10px 0 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }
        
        .console-header { 
            background: rgba(22, 33, 62, 0.9); 
            padding: 15px 20px; 
            font-size: 0.95em; 
            color: #3DDC84; 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            font-weight: 600; 
            border-bottom: 2px solid rgba(61, 220, 132, 0.3); 
        }
        
        .console-line { 
            padding: 10px 20px; 
            font-family: 'Consolas', monospace; 
            font-size: 0.9em; 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            display: flex; 
            align-items: center; 
            gap: 12px; 
        }
        
        .console-line.info { color: #4CAF50; }
        .console-line.warning { color: #FF9800; }
        .console-line.error { color: #f44336; }
        .console-line.build { color: #2196F3; }
        
        /* STATUS BAR VIS√çVEL */
        .status-bar-bottom { 
            background: linear-gradient(135deg, #0f3460 0%, #16213e 100%); 
            padding: 12px 25px; 
            border-top: 3px solid #3DDC84; 
            font-size: 0.9em; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            box-shadow: 0 -4px 15px rgba(0,0,0,0.3); 
            z-index: 100;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: rgba(61, 220, 132, 0.1);
            border-radius: 8px;
            border: 2px solid rgba(61, 220, 132, 0.2);
        }
        
        /* MODAIS VIS√çVEIS */
        .modal { 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(10, 15, 30, 0.98); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 10000; 
            backdrop-filter: blur(10px); 
        }
        
        .modal-content { 
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%); 
            padding: 40px; 
            border-radius: 20px; 
            width: 800px; 
            max-height: 85vh; 
            overflow-y: auto; 
            border: 4px solid #3DDC84; 
            box-shadow: 0 30px 80px rgba(0,0,0,0.7); 
        }
        
        .modal-title { 
            color: #3DDC84; 
            margin-bottom: 30px; 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            font-size: 1.5em; 
        }
        
        .modal-buttons { 
            display: flex; 
            gap: 15px; 
            margin-top: 35px; 
            justify-content: flex-end; 
        }
        
        /* LOADING VIS√çVEL */
        .loading { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(10, 15, 30, 0.98); 
            z-index: 20000; 
            align-items: center; 
            justify-content: center; 
            backdrop-filter: blur(15px); 
        }
        
        .loading-content { 
            text-align: center; 
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%); 
            padding: 50px; 
            border-radius: 20px; 
            border: 4px solid #3DDC84; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.8); 
        }
        
        .spinner { 
            border: 6px solid rgba(61, 220, 132, 0.3); 
            border-radius: 50%; 
            border-top: 6px solid #3DDC84; 
            width: 80px; 
            height: 80px; 
            animation: spin 1s linear infinite; 
            margin: 0 auto 30px; 
        }
        
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        /* EXPORT OPTIONS VIS√çVEIS */
        .export-options { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 25px; 
            margin: 30px 0; 
        }
        
        .export-option { 
            background: linear-gradient(135deg, rgba(15, 52, 96, 0.8) 0%, rgba(15, 52, 96, 0.5) 100%); 
            border: 3px solid transparent; 
            border-radius: 15px; 
            padding: 30px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            text-align: center; 
            border: 3px solid rgba(61, 220, 132, 0.3); 
        }
        
        .export-option:hover { 
            border-color: rgba(61, 220, 132, 0.8); 
            transform: translateY(-8px); 
            box-shadow: 0 15px 40px rgba(61, 220, 132, 0.4); 
        }
        
        .export-option.selected { 
            border-color: #3DDC84; 
            background: rgba(61, 220, 132, 0.2); 
            box-shadow: 0 10px 35px rgba(61, 220, 132, 0.6); 
        }
        
        .export-option-icon { 
            font-size: 3em; 
            margin-bottom: 20px; 
        }
        
        /* PROJECT LIST VIS√çVEL */
        .projects-list { 
            max-height: 400px; 
            overflow-y: auto; 
            margin: 30px 0; 
        }
        
        .project-item { 
            padding: 20px; 
            border-bottom: 2px solid rgba(15, 52, 96, 0.5); 
            cursor: pointer; 
            transition: all 0.3s ease; 
            background: rgba(255,255,255,0.05); 
            border-radius: 10px; 
            margin-bottom: 10px; 
            border: 2px solid transparent; 
        }
        
        .project-item:hover { 
            background: rgba(61, 220, 132, 0.15); 
            border-color: rgba(61, 220, 132, 0.4); 
            transform: translateX(5px); 
        }
        
        .project-item.selected { 
            background: rgba(61, 220, 132, 0.25); 
            border-left: 6px solid #3DDC84; 
            border-color: #3DDC84; 
        }
        
        /* COMPONENT LIST VIS√çVEL */
        .component-list { 
            max-height: 300px; 
            overflow-y: auto; 
            background: rgba(255,255,255,0.05); 
            border-radius: 10px; 
            padding: 10px; 
            border: 2px solid rgba(61, 220, 132, 0.2); 
        }
        
        .component-item { 
            padding: 12px 18px; 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            cursor: pointer; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            transition: all 0.3s ease; 
            border-radius: 6px; 
            margin-bottom: 5px; 
        }
        
        .component-item:hover { 
            background: rgba(61, 220, 132, 0.15); 
            transform: translateX(5px); 
        }
        
        .component-item.selected { 
            background: rgba(61, 220, 132, 0.25); 
            border-left: 4px solid #3DDC84; 
        }
        
        /* COLOR PREVIEW VIS√çVEL */
        .color-preview { 
            width: 40px; 
            height: 40px; 
            border-radius: 8px; 
            border: 3px solid rgba(255,255,255,0.3); 
            margin-top: 10px; 
        }
        
        /* SCROLLBAR VIS√çVEL */
        ::-webkit-scrollbar { 
            width: 15px; 
        }
        
        ::-webkit-scrollbar-track { 
            background: #0f3460; 
            border-radius: 8px; 
        }
        
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, #3DDC84 0%, #2ECC71 100%); 
            border-radius: 8px; 
            border: 3px solid #0f3460; 
        }
        
        ::-webkit-scrollbar-thumb:hover { 
            background: linear-gradient(135deg, #2ECC71 0%, #27AE60 100%); 
        }
        
        /* SELECTION INFO VIS√çVEL */
        .selection-info { 
            position: absolute; 
            top: 25px; 
            right: 25px; 
            background: linear-gradient(135deg, rgba(15, 52, 96, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%); 
            padding: 15px 25px; 
            border-radius: 12px; 
            border: 3px solid #3DDC84; 
            z-index: 1000; 
            font-size: 0.95em; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            display: none; 
        }
        
        /* RESPONSIVE */
        @media (max-width: 1400px) {
            .pc-frame { 
                transform: scale(0.9); 
                margin-top: 20px; 
            }
            .phone-frame { 
                transform: scale(0.9); 
                margin-top: 20px; 
            }
        }
        
        @media (max-width: 1200px) {
            .pc-frame { 
                transform: scale(0.8); 
                margin-top: 40px; 
            }
            .phone-frame { 
                transform: scale(0.8); 
                margin-top: 40px; 
            }
        }
        
        /* QUICK ACTIONS VIS√çVEIS */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }
        
        .quick-action-btn {
            padding: 12px;
            background: rgba(61, 220, 132, 0.1);
            border: 2px solid rgba(61, 220, 132, 0.3);
            border-radius: 8px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .quick-action-btn:hover {
            background: rgba(61, 220, 132, 0.2);
            border-color: #3DDC84;
            transform: translateY(-3px);
        }
        
        /* IMPORTANTE: Tornar tudo vis√≠vel */
        .visible {
            opacity: 1 !important;
            visibility: visible !important;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Tela de In√≠cio VIS√çVEL -->
    <div id="startup" class="modal" style="display: flex;">
        <div class="modal-content" style="width: 900px;">
            <div class="modal-title">
                <i class="fas fa-globe" style="font-size: 2.5em; color: #3DDC84;"></i>
                <h1>Universal Dev Studio v5.0</h1>
            </div>
            <h3 style="text-align: center; color: #b0b0b0; margin-bottom: 35px; font-weight: 400;">
                Crie Apps para PC e Mobile Simultaneamente!
            </h3>
            
            <div style="display: flex; gap: 25px; margin-bottom: 30px;">
                <button class="btn" onclick="showNewProjectModal()" style="flex: 1; padding: 22px; font-size: 1.1em;">
                    <i class="fas fa-plus-circle"></i> NOVO PROJETO
                </button>
                <button class="btn-secondary" onclick="showProjectManager()" style="flex: 1; padding: 22px; font-size: 1.1em;">
                    <i class="fas fa-folder-open"></i> ABRIR PROJETO
                </button>
            </div>
            
            <div id="projectManager" style="display: none;">
                <h3 style="color: #3DDC84; margin-bottom: 25px; display: flex; align-items: center; gap: 15px;">
                    <i class="fas fa-project-diagram"></i> Projetos Salvos
                </h3>
                <div class="projects-list" id="existingProjects">
                    <!-- Projetos ser√£o carregados aqui -->
                </div>
                <div class="modal-buttons">
                    <button class="btn-secondary" onclick="showProjectTemplates()">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </button>
                    <button class="btn" onclick="loadSelectedProject()" id="loadProjectBtn" disabled>
                        <i class="fas fa-play"></i> Abrir Projeto
                    </button>
                    <button class="btn-danger" onclick="deleteSelectedProject()" id="deleteProjectBtn" disabled>
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            </div>
            
            <div id="projectTemplates">
                <h3 style="color: #3DDC84; margin-bottom: 25px; display: flex; align-items: center; gap: 15px;">
                    <i class="fas fa-layer-group"></i> Modelos de Projeto
                </h3>
                <div class="export-options">
                    <div class="export-option" onclick="selectProject('universal')">
                        <div class="export-option-icon" style="color: #3DDC84;">üåê</div>
                        <h4 style="color: #3DDC84; margin-bottom: 10px;">App Universal</h4>
                        <p style="color: #b0b0b0;">Funciona em PC e Mobile</p>
                        <small style="color: #888; display: block; margin-top: 10px;">HTML5 + JavaScript</small>
                    </div>
                    <div class="export-option" onclick="selectProject('windows')">
                        <div class="export-option-icon" style="color: #2196F3;">üñ•Ô∏è</div>
                        <h4 style="color: #2196F3; margin-bottom: 10px;">Aplicativo Windows</h4>
                        <p style="color: #b0b0b0;">Desktop .EXE</p>
                        <small style="color: #888; display: block; margin-top: 10px;">WinForms + C#</small>
                    </div>
                    <div class="export-option" onclick="selectProject('android')">
                        <div class="export-option-icon" style="color: #4CAF50;">üì±</div>
                        <h4 style="color: #4CAF50; margin-bottom: 10px;">App Android</h4>
                        <p style="color: #b0b0b0;">APK nativo</p>
                        <small style="color: #888; display: block; margin-top: 10px;">Kotlin + XML</small>
                    </div>
                    <div class="export-option" onclick="selectProject('web')">
                        <div class="export-option-icon" style="color: #FF9800;">üåç</div>
                        <h4 style="color: #FF9800; margin-bottom: 10px;">Web App</h4>
                        <p style="color: #b0b0b0;">Aplica√ß√£o Web Responsiva</p>
                        <small style="color: #888; display: block; margin-top: 10px;">HTML + CSS + JS</small>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button class="btn" onclick="startIDE()" id="startBtn" disabled style="width: 100%; padding: 22px; font-size: 1.2em;">
                        <i class="fas fa-rocket"></i> CRIAR PROJETO
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Novo Projeto VIS√çVEL -->
    <div id="newProjectModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-title">
                <i class="fas fa-cube" style="color: #3DDC84;"></i>
                <h2>Novo Projeto Universal</h2>
            </div>
            
            <div class="prop-row">
                <label><i class="fas fa-heading"></i> Nome do Projeto:</label>
                <input type="text" id="projectName" value="MeuProjetoUniversal" placeholder="Ex: Meu App" style="background: rgba(255,255,255,0.15);">
            </div>
            
            <div class="prop-row">
                <label><i class="fas fa-mobile-alt"></i> Plataformas:</label>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 15px;">
                    <label class="tool-item" style="cursor: pointer; text-align: center; padding: 20px;">
                        <input type="checkbox" name="platform" value="windows" checked style="margin-right: 15px; transform: scale(1.3);">
                        <i class="fab fa-windows" style="color: #2196F3;"></i> Windows
                    </label>
                    <label class="tool-item" style="cursor: pointer; text-align: center; padding: 20px;">
                        <input type="checkbox" name="platform" value="android" checked style="margin-right: 15px; transform: scale(1.3);">
                        <i class="fab fa-android" style="color: #4CAF50;"></i> Android
                    </label>
                    <label class="tool-item" style="cursor: pointer; text-align: center; padding: 20px;">
                        <input type="checkbox" name="platform" value="web" style="margin-right: 15px; transform: scale(1.3);">
                        <i class="fas fa-globe" style="color: #FF9800;"></i> Web
                    </label>
                    <label class="tool-item" style="cursor: pointer; text-align: center; padding: 20px;">
                        <input type="checkbox" name="platform" value="ios" style="margin-right: 15px; transform: scale(1.3);">
                        <i class="fab fa-apple" style="color: #9E9E9E;"></i> iOS
                    </label>
                </div>
            </div>
            
            <div class="prop-row">
                <label><i class="fas fa-code"></i> Tecnologia Principal:</label>
                <select id="mainTechnology" style="background: rgba(255,255,255,0.15);">
                    <option value="html5">HTML5 + JavaScript</option>
                    <option value="csharp">C# (.NET)</option>
                    <option value="java">Java</option>
                    <option value="python">Python</option>
                    <option value="electron">Electron</option>
                </select>
            </div>
            
            <div class="prop-row">
                <label><i class="fas fa-expand-arrows-alt"></i> Tela Principal (PC):</label>
                <div class="prop-grid">
                    <div>
                        <label>Largura:</label>
                        <input type="number" id="screenWidth" value="850" placeholder="850" style="background: rgba(255,255,255,0.15);">
                    </div>
                    <div>
                        <label>Altura:</label>
                        <input type="number" id="screenHeight" value="650" placeholder="600" style="background: rgba(255,255,255,0.15);">
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeModal('newProjectModal')">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="btn" onclick="createNewProject()">
                    <i class="fas fa-code"></i> Criar Projeto
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Screen VIS√çVEL -->
    <div class="loading" id="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <h3 style="color: #3DDC84; margin-bottom: 20px; font-size: 1.5em;" id="loadingTitle">Criando Projeto...</h3>
            <p id="loadingText" style="color: #b0b0b0; font-size: 1.1em;">Inicializando ambiente de desenvolvimento</p>
            <div id="loadingProgress" style="width: 400px; background: #0f3460; height: 10px; margin: 30px auto; border-radius: 5px; overflow: hidden; border: 2px solid #3DDC84;">
                <div id="loadingBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #3DDC84, #2196F3); transition: width 0.3s;"></div>
            </div>
        </div>
    </div>

    <!-- Interface Principal VIS√çVEL -->
    <div class="header" id="header" style="display: none;">
        <div class="logo">
            <i class="fas fa-globe"></i>
            Universal Dev Studio
        </div>
        
        <button class="nav-btn active" onclick="openTab('designer')">
            <i class="fas fa-paint-brush"></i> Designer
        </button>
        <button class="nav-btn" onclick="openTab('code')">
            <i class="fas fa-code"></i> C√≥digo
        </button>
        <button class="nav-btn" onclick="openTab('properties')">
            <i class="fas fa-sliders-h"></i> Propriedades
        </button>
        <button class="nav-btn" onclick="openTab('export')">
            <i class="fas fa-download"></i> Exportar
        </button>
        
        <div class="spacer"></div>
        
        <div style="display: flex; align-items: center; gap: 20px; color: #b0b0b0; font-weight: 500;">
            <i class="fas fa-cube"></i>
            <span id="projectNameDisplay">Projeto Universal</span>
        </div>
        
        <div style="display: flex; gap: 15px; align-items: center;">
            <button class="btn-secondary" onclick="saveProject()">
                <i class="fas fa-save"></i> Salvar
            </button>
            <button class="btn-warning" onclick="testApp()">
                <i class="fas fa-play"></i> Testar
            </button>
            <button class="btn" onclick="exportProject()">
                <i class="fas fa-file-export"></i> Exportar
            </button>
        </div>
    </div>

    <div class="main" id="main" style="display: none;">
        <!-- Sidebar VIS√çVEL -->
        <div class="sidebar">
            <div class="sidebar-title">
                <i class="fas fa-toolbox"></i> Componentes
            </div>
            
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="button">
                <i class="fas fa-square" style="color: #2196F3;"></i> Bot√£o
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="label">
                <i class="fas fa-font" style="color: #4CAF50;"></i> Label
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="textbox">
                <i class="fas fa-edit" style="color: #FF9800;"></i> TextBox
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="combobox">
                <i class="fas fa-caret-down" style="color: #9C27B0;"></i> ComboBox
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="checkbox">
                <i class="fas fa-check-square" style="color: #00BCD4;"></i> CheckBox
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="image">
                <i class="fas fa-image" style="color: #E91E63;"></i> Image
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="progressbar">
                <i class="fas fa-spinner" style="color: #FF5722;"></i> ProgressBar
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="listbox">
                <i class="fas fa-list" style="color: #795548;"></i> ListBox
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="grid">
                <i class="fas fa-table" style="color: #607D8B;"></i> DataGrid
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="panel">
                <i class="fas fa-square-full" style="color: #009688;"></i> Panel
            </div>
            <div class="tool-item" draggable="true" ondragstart="drag(event)" data-type="menu">
                <i class="fas fa-bars" style="color: #3F51B5;"></i> Menu
            </div>
            
            <div class="sidebar-title" style="margin-top: 35px;">
                <i class="fas fa-layer-group"></i> Componentes na Tela
                <span id="componentCount" style="margin-left: auto; color: #3DDC84; background: rgba(61, 220, 132, 0.2); padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">0</span>
            </div>
            <div class="component-list" id="componentList"></div>
            
            <div class="sidebar-title" style="margin-top: 35px;">
                <i class="fas fa-magic"></i> Ferramentas R√°pidas
            </div>
            <div class="quick-actions">
                <button class="quick-action-btn" onclick="alignSelected('left')">
                    <i class="fas fa-align-left"></i> Esquerda
                </button>
                <button class="quick-action-btn" onclick="alignSelected('center')">
                    <i class="fas fa-align-center"></i> Centro
                </button>
                <button class="quick-action-btn" onclick="alignSelected('right')">
                    <i class="fas fa-align-right"></i> Direita
                </button>
                <button class="quick-action-btn" onclick="duplicateSelected()">
                    <i class="fas fa-copy"></i> Duplicar
                </button>
                <button class="quick-action-btn" onclick="deleteSelected()" style="color: #f44336;">
                    <i class="fas fa-trash"></i> Excluir
                </button>
                <button class="quick-action-btn" onclick="clearAll()" style="color: #FF9800;">
                    <i class="fas fa-broom"></i> Limpar
                </button>
            </div>
        </div>

        <!-- √Årea Central VIS√çVEL -->
        <div class="center">
            <div class="tabs">
                <div class="tab active" onclick="openTab('designer')" data-tab="designer">
                    <i class="fas fa-paint-brush"></i> Designer
                </div>
                <div class="tab" onclick="openTab('code')" data-tab="code">
                    <i class="fas fa-code"></i> C√≥digo
                </div>
                <div class="tab" onclick="openTab('properties')" data-tab="properties">
                    <i class="fas fa-cogs"></i> Propriedades
                </div>
                <div class="tab" onclick="openTab('export')" data-tab="export">
                    <i class="fas fa-download"></i> Exportar
                </div>
            </div>

            <!-- Conte√∫do das Abas -->
            <div class="content active designer" id="designer" ondrop="drop(event)" ondragover="allowDrop(event)">
                <!-- Device Selector VIS√çVEL -->
                <div class="device-selector">
                    <div class="device-btn active" onclick="switchDevice('pc')">
                        <i class="fas fa-desktop"></i> PC (Desktop)
                    </div>
                    <div class="device-btn" onclick="switchDevice('mobile')">
                        <i class="fas fa-mobile-alt"></i> Mobile
                    </div>
                </div>
                
                <!-- Selection Info VIS√çVEL -->
                <div class="selection-info" id="selectionInfo">
                    <strong style="color: #3DDC84;">Selecionado:</strong> 
                    <span id="selectedName" style="margin-left: 10px;">Nenhum</span>
                </div>
                
                <!-- PC Frame -->
                <div class="pc-frame" id="pcFrame">
                    <div class="pc-title-bar">
                        <span><i class="fab fa-windows" style="margin-right: 10px;"></i> Meu Aplicativo</span>
                        <span>
                            <i class="fas fa-window-minimize" style="margin-right: 15px; cursor: pointer;"></i>
                            <i class="fas fa-window-maximize" style="margin-right: 15px; cursor: pointer;"></i>
                            <i class="fas fa-times" style="cursor: pointer;"></i>
                        </span>
                    </div>
                    <div class="pc-screen" id="pcScreen"></div>
                </div>
                
                <!-- Mobile Frame -->
                <div class="phone-frame" id="phoneFrame">
                    <div class="phone-notch"></div>
                    <div class="phone-screen" id="phoneScreen">
                        <div class="status-bar">
                            <span>9:41</span>
                            <span>
                                <i class="fas fa-signal" style="margin-right: 10px;"></i>
                                <i class="fas fa-wifi" style="margin-right: 10px;"></i>
                                <i class="fas fa-battery-full"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content code-view" id="code">
                <div class="line-nums" id="codeLineNums">1</div>
                <div class="code-editor" id="codeEditor" contenteditable="true" spellcheck="false" oninput="updateCode()"></div>
            </div>

            <div class="content" id="properties">
                <div style="padding: 30px;">
                    <h3 style="color: #3DDC84; margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
                        <i class="fas fa-cogs"></i> Configura√ß√µes do Projeto
                    </h3>
                    
                    <div class="prop-section">
                        <div class="prop-section-title">
                            <i class="fas fa-info-circle"></i> Informa√ß√µes Gerais
                        </div>
                        <div class="prop-row">
                            <label>Nome do Projeto:</label>
                            <input type="text" id="configProjectName" value="MeuProjeto" onchange="updateProjectConfig()" style="background: rgba(255,255,255,0.1);">
                        </div>
                        <div class="prop-row">
                            <label>Descri√ß√£o:</label>
                            <textarea id="configDescription" rows="3" onchange="updateProjectConfig()" style="background: rgba(255,255,255,0.1);">Um aplicativo universal criado com Universal Dev Studio</textarea>
                        </div>
                    </div>
                    
                    <div class="prop-section">
                        <div class="prop-section-title">
                            <i class="fas fa-palette"></i> Apar√™ncia
                        </div>
                        <div class="prop-row">
                            <label>Cor de Fundo da Tela:</label>
                            <input type="color" id="configBackground" value="#f5f5f5" onchange="updateScreenBackground()">
                        </div>
                        <div class="prop-row">
                            <label>Tema da Interface:</label>
                            <select id="configTheme" onchange="updateTheme()" style="background: rgba(255,255,255,0.1);">
                                <option value="light">Claro</option>
                                <option value="dark">Escuro</option>
                                <option value="blue">Azul</option>
                                <option value="green">Verde</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="prop-section">
                        <div class="prop-section-title">
                            <i class="fas fa-expand-arrows-alt"></i> Tamanhos
                        </div>
                        <div class="prop-grid">
                            <div>
                                <label>Largura PC:</label>
                                <input type="number" id="configPcWidth" value="850" onchange="updatePcSize()" style="background: rgba(255,255,255,0.1);">
                            </div>
                            <div>
                                <label>Altura PC:</label>
                                <input type="number" id="configPcHeight" value="650" onchange="updatePcSize()" style="background: rgba(255,255,255,0.1);">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content" id="export">
                <div style="padding: 30px;">
                    <h3 style="color: #3DDC84; margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
                        <i class="fas fa-file-export"></i> Exportar Projeto
                    </h3>
                    
                    <div class="export-options">
                        <div class="export-option" onclick="selectExportType('windows')">
                            <div class="export-option-icon">üñ•Ô∏è</div>
                            <h4 style="color: #2196F3;">Windows EXE</h4>
                            <p>Aplicativo desktop para Windows</p>
                            <small>.NET Framework 4.8</small>
                        </div>
                        <div class="export-option" onclick="selectExportType('android')">
                            <div class="export-option-icon">üì±</div>
                            <h4 style="color: #4CAF50;">Android APK</h4>
                            <p>Aplicativo nativo para Android</p>
                            <small>Android 5.0+</small>
                        </div>
                        <div class="export-option" onclick="selectExportType('web')">
                            <div class="export-option-icon">üåê</div>
                            <h4 style="color: #FF9800;">Web App</h4>
                            <p>Aplica√ß√£o web responsiva</p>
                            <small>HTML5 + CSS3 + JS</small>
                        </div>
                        <div class="export-option" onclick="selectExportType('all')">
                            <div class="export-option-icon">üì¶</div>
                            <h4 style="color: #3DDC84;">Todos os Formatos</h4>
                            <p>Exporta√ß√£o completa multiplataforma</p>
                            <small>Todas as plataformas</small>
                        </div>
                    </div>
                    
                    <div id="exportConfig" style="margin-top: 40px; display: none;">
                        <div class="prop-section">
                            <div class="prop-section-title" id="exportConfigTitle">
                                <i class="fas fa-cog"></i> Configura√ß√µes de Exporta√ß√£o
                            </div>
                            <div class="prop-row">
                                <label>Nome do Arquivo:</label>
                                <input type="text" id="exportFileName" value="MeuApp" style="background: rgba(255,255,255,0.1);">
                            </div>
                            <div class="prop-row">
                                <label>Vers√£o:</label>
                                <input type="text" id="exportVersion" value="1.0.0" style="background: rgba(255,255,255,0.1);">
                            </div>
                            <div class="prop-row">
                                <label>Comprimir Arquivos:</label>
                                <label style="display: flex; align-items: center; gap: 15px; color: #b0b0b0;">
                                    <input type="checkbox" id="exportCompress" checked style="transform: scale(1.3);">
                                    Reduzir tamanho do arquivo
                                </label>
                            </div>
                            <div class="prop-row">
                                <label>Incluir C√≥digo Fonte:</label>
                                <label style="display: flex; align-items: center; gap: 15px; color: #b0b0b0;">
                                    <input type="checkbox" id="exportSource" checked style="transform: scale(1.3);">
                                    Incluir arquivos de c√≥digo fonte
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-buttons" style="margin-top: 40px;">
                        <button class="btn-secondary" onclick="resetExport()">
                            <i class="fas fa-undo"></i> Limpar
                        </button>
                        <button class="btn" onclick="startExport()" id="exportButton">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Console VIS√çVEL -->
            <div class="console">
                <div class="console-header">
                    <i class="fas fa-terminal"></i> Console
                    <span style="margin-left: auto; font-size: 0.9em;" id="consoleStatus">
                        <i class="fas fa-circle" style="color: #4CAF50;"></i> Sistema Pronto
                    </span>
                </div>
                <div id="consoleContent"></div>
            </div>
        </div>

        <!-- Painel de Propriedades VIS√çVEL -->
        <div class="props">
            <div class="sidebar-title">
                <i class="fas fa-sliders-h"></i> Propriedades do Componente
            </div>
            
            <div id="propsContent">
                <div style="color: #b0b0b0; padding: 40px; text-align: center; background: rgba(255,255,255,0.05); border-radius: 12px; margin-top: 20px;">
                    <i class="fas fa-mouse-pointer" style="font-size: 3.5em; margin-bottom: 20px; color: #3DDC84;"></i>
                    <h4 style="color: #3DDC84; margin-bottom: 15px;">Nenhum Componente Selecionado</h4>
                    <p>Clique em um componente na tela para editar suas propriedades</p>
                    <p style="font-size: 0.9em; margin-top: 15px; color: #888;">
                        <i class="fas fa-lightbulb"></i> Dica: Arraste componentes da barra lateral
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar VIS√çVEL -->
    <div class="status-bar-bottom" id="statusBar" style="display: none;">
        <div class="status-item">
            <i class="fas fa-desktop" id="deviceIcon"></i>
            <span id="deviceInfo">Modo: PC</span>
        </div>
        <div class="status-item">
            <i class="fas fa-crosshairs"></i>
            <span id="positionInfo">X: 0, Y: 0 | W: 0, H: 0</span>
        </div>
        <div class="status-item">
            <i class="fas fa-cube"></i>
            <span id="selectionInfoBottom">Nenhum componente selecionado</span>
        </div>
        <div class="status-item">
            <i class="fas fa-memory"></i>
            <span id="memoryInfo">Componentes: 0</span>
        </div>
    </div>

    <script>
        // Estado da Aplica√ß√£o
        const app = {
            // Projeto
            projectName: 'Projeto Universal',
            projectId: null,
            projectType: 'universal',
            platforms: ['windows', 'android'],
            
            // Dispositivo atual
            currentDevice: 'pc',
            
            // Componentes
            components: {
                pc: [],
                mobile: []
            },
            
            // Componente selecionado
            selectedComponent: null,
            selectedComponentId: null,
            
            // Contadores
            counters: {
                button: 1,
                label: 1,
                textbox: 1,
                combobox: 1,
                checkbox: 1,
                image: 1,
                progressbar: 1,
                listbox: 1,
                grid: 1,
                panel: 1,
                menu: 1
            },
            
            // Estado de UI
            dragging: null,
            resizing: false,
            dragOffset: { x: 0, y: 0 },
            
            // Projetos salvos
            projects: [],
            selectedProjectId: null,
            
            // Export
            exportType: 'windows',
            
            // C√≥digo
            currentCode: '',
            
            // Configura√ß√µes
            settings: {
                pcWidth: 850,
                pcHeight: 650,
                backgroundColor: '#f5f5f5',
                theme: 'dark'
            }
        };

        // Inicializa√ß√£o
        function init() {
            loadProjects();
            setupEventListeners();
            updateDeviceInfo();
            log('üöÄ Universal Dev Studio iniciado!', 'info');
            log('‚úÖ Sistema pronto para criar aplicativos', 'info');
        }

        // Log no console
        function log(message, type = 'info') {
            const consoleEl = document.getElementById('consoleContent');
            const div = document.createElement('div');
            div.className = `console-line ${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'warning') icon = 'fa-exclamation-triangle';
            if (type === 'error') icon = 'fa-times-circle';
            if (type === 'build') icon = 'fa-cog';
            
            div.innerHTML = `
                <i class="fas ${icon}" style="color: ${type === 'info' ? '#4CAF50' : type === 'warning' ? '#FF9800' : type === 'error' ? '#f44336' : '#2196F3'};"></i>
                <span style="color: #a0a0a0; min-width: 80px;">${new Date().toLocaleTimeString()}</span>
                <span>${message}</span>
            `;
            consoleEl.appendChild(div);
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        // Atualizar progresso
        function updateProgress(percent, message) {
            document.getElementById('loadingBar').style.width = percent + '%';
            document.getElementById('loadingText').textContent = message;
        }

        // Sistema de Drag & Drop
        function drag(event) {
            event.dataTransfer.setData('type', event.target.dataset.type);
        }

        function allowDrop(event) {
            event.preventDefault();
        }

        function drop(event) {
            event.preventDefault();
            const type = event.dataTransfer.getData('type');
            
            let screen, rect, x, y;
            
            if (app.currentDevice === 'pc') {
                screen = document.getElementById('pcScreen');
                rect = screen.getBoundingClientRect();
                x = event.clientX - rect.left;
                y = event.clientY - rect.top;
            } else {
                screen = document.getElementById('phoneScreen');
                rect = screen.getBoundingClientRect();
                x = event.clientX - rect.left;
                y = event.clientY - rect.top;
                
                // Ajustar para status bar
                if (y < 30) y = 30;
            }
            
            if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {
                addComponent(type, x, y);
            }
        }

        // Adicionar componente
        function addComponent(type, x, y, customProps = {}) {
            const name = `${type}${app.counters[type]++}`;
            const id = `comp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            
            // Criar elemento
            const el = document.createElement('div');
            el.className = `universal-component component-${type}`;
            el.id = id;
            el.dataset.type = type;
            el.dataset.name = name;
            
            // Posicionar
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            
            // Tamanhos padr√£o
            let defaultWidth, defaultHeight;
            
            if (app.currentDevice === 'pc') {
                defaultWidth = customProps.width || 
                    (type === 'button' ? 140 : 
                     type === 'label' ? 120 : 
                     type === 'textbox' ? 220 : 
                     type === 'combobox' ? 170 : 120);
                defaultHeight = customProps.height || 
                    (type === 'button' ? 45 : 
                     type === 'label' ? 35 : 
                     type === 'textbox' ? 35 : 
                     type === 'combobox' ? 35 : 120);
            } else {
                defaultWidth = customProps.width || 
                    (type === 'button' ? 160 : 
                     type === 'label' : 140 : 
                     type === 'textbox' ? 270 : 
                     type === 'combobox' ? 220 : 170);
                defaultHeight = customProps.height || 
                    (type === 'button' ? 55 : 
                     type === 'label' ? 45 : 
                     type === 'textbox' ? 45 : 
                     type === 'combobox' ? 45 : 140);
            }
            
            el.style.width = defaultWidth + 'px';
            el.style.height = defaultHeight + 'px';
            
            // Conte√∫do baseado no tipo
            switch(type) {
                case 'button':
                    el.innerHTML = 'Bot√£o';
                    el.style.background = customProps.background || 'linear-gradient(135deg, #2196F3 0%, #1976D2 100%)';
                    el.style.color = customProps.color || '#FFFFFF';
                    el.style.fontSize = customProps.fontSize || '15px';
                    el.style.borderRadius = customProps.borderRadius || '10px';
                    el.style.padding = '15px 30px';
                    el.style.display = 'flex';
                    el.style.alignItems = 'center';
                    el.style.justifyContent = 'center';
                    el.style.fontWeight = '600';
                    el.style.boxShadow = '0 6px 15px rgba(33, 150, 243, 0.4)';
                    break;
                    
                case 'label':
                    el.innerHTML = 'Texto';
                    el.style.color = customProps.color || '#212121';
                    el.style.fontSize = customProps.fontSize || '17px';
                    el.style.fontWeight = customProps.fontWeight || '500';
                    el.style.padding = '12px';
                    el.style.display = 'flex';
                    el.style.alignItems = 'center';
                    break;
                    
                case 'textbox':
                    el.innerHTML = 'Digite aqui...';
                    el.style.background = customProps.background || '#FFFFFF';
                    el.style.color = customProps.color || '#212121';
                    el.style.border = customProps.border || '3px solid #BDBDBD';
                    el.style.borderRadius = customProps.borderRadius || '10px';
                    el.style.padding = '12px 18px';
                    el.contentEditable = true;
                    break;
                    
                case 'combobox':
                    el.innerHTML = 'Selecione...';
                    el.style.background = customProps.background || '#FFFFFF';
                    el.style.color = customProps.color || '#212121';
                    el.style.border = customProps.border || '3px solid #BDBDBD';
                    el.style.borderRadius = customProps.borderRadius || '10px';
                    el.style.padding = '12px';
                    break;
                    
                case 'checkbox':
                    el.innerHTML = `
                        <div style="width: 24px; height: 24px; border: 3px solid #2196F3; border-radius: 6px; display: flex; align-items: center; justify-content: center; background: white; margin-right: 12px;">
                            <i class="fas fa-check" style="color: #2196F3; display: none;"></i>
                        </div>
                        <span>Checkbox</span>
                    `;
                    el.style.color = customProps.color || '#212121';
                    el.style.fontSize = customProps.fontSize || '15px';
                    el.style.display = 'flex';
                    el.style.alignItems = 'center';
                    el.style.padding = '12px';
                    break;
                    
                case 'image':
                    el.innerHTML = '<i class="fas fa-image" style="font-size: 36px; color: #757575;"></i>';
                    el.style.background = customProps.background || '#E0E0E0';
                    el.style.border = customProps.border || '3px solid #BDBDBD';
                    el.style.borderRadius = customProps.borderRadius || '12px';
                    el.style.display = 'flex';
                    el.style.alignItems = 'center';
                    el.style.justifyContent = 'center';
                    break;
            }
            
            // Adicionar handles de redimensionamento
            const handlePositions = [
                { class: 'resize-nw', cursor: 'nwse-resize' },
                { class: 'resize-ne', cursor: 'nesw-resize' },
                { class: 'resize-sw', cursor: 'nesw-resize' },
                { class: 'resize-se', cursor: 'nwse-resize' },
                { class: 'resize-n', cursor: 'ns-resize' },
                { class: 'resize-s', cursor: 'ns-resize' },
                { class: 'resize-w', cursor: 'ew-resize' },
                { class: 'resize-e', cursor: 'ew-resize' }
            ];
            
            handlePositions.forEach(pos => {
                const handle = document.createElement('div');
                handle.className = `resize-handle ${pos.class}`;
                handle.style.cursor = pos.cursor;
                el.appendChild(handle);
            });
            
            // Event Listeners
            el.addEventListener('mousedown', startDrag);
            
            el.querySelectorAll('.resize-handle').forEach(handle => {
                handle.addEventListener('mousedown', startResize);
            });
            
            el.addEventListener('click', (e) => {
                if (!e.target.classList.contains('resize-handle')) {
                    selectComponent(el);
                }
            });
            
            // Adicionar √† tela
            const screen = app.currentDevice === 'pc' ? 
                document.getElementById('pcScreen') : 
                document.getElementById('phoneScreen');
            screen.appendChild(el);
            
            // Salvar no estado
            const component = {
                id,
                name,
                type,
                x,
                y,
                width: defaultWidth,
                height: defaultHeight,
                element: el,
                device: app.currentDevice,
                properties: {
                    background: el.style.background,
                    color: el.style.color,
                    fontSize: el.style.fontSize,
                    text: el.textContent || el.innerHTML,
                    ...customProps
                }
            };
            
            app.components[app.currentDevice].push(component);
            updateComponentList();
            updateStatusInfo();
            generateCode();
            log(`‚úÖ ${name} adicionado (${app.currentDevice})`, 'info');
            
            return component;
        }

        // Redimensionamento
        function startResize(e) {
            e.stopPropagation();
            e.preventDefault();
            
            app.resizing = true;
            app.dragging = e.target.parentElement;
            
            const rect = app.dragging.getBoundingClientRect();
            app.dragOffset.startX = e.clientX;
            app.dragOffset.startY = e.clientY;
            app.dragOffset.startWidth = rect.width;
            app.dragOffset.startHeight = rect.height;
            app.dragOffset.startLeft = parseFloat(app.dragging.style.left);
            app.dragOffset.startTop = parseFloat(app.dragging.style.top);
            
            const handleClass = e.target.className.split(' ')[1];
            app.dragOffset.handle = handleClass.replace('resize-', '');
            
            document.addEventListener('mousemove', doResize);
            document.addEventListener('mouseup', stopResize);
            
            log(`‚Üî Redimensionando ${app.dragging.dataset.name}`, 'info');
        }

        function doResize(e) {
            if (app.resizing && app.dragging) {
                e.preventDefault();
                
                const deltaX = e.clientX - app.dragOffset.startX;
                const deltaY = e.clientY - app.dragOffset.startY;
                const handle = app.dragOffset.handle;
                
                let newWidth = app.dragOffset.startWidth;
                let newHeight = app.dragOffset.startHeight;
                let newLeft = app.dragOffset.startLeft;
                let newTop = app.dragOffset.startTop;
                
                const minWidth = 50;
                const minHeight = 30;
                
                switch(handle) {
                    case 'e':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth + deltaX);
                        break;
                    case 'w':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth - deltaX);
                        newLeft = app.dragOffset.startLeft + deltaX;
                        break;
                    case 's':
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight + deltaY);
                        break;
                    case 'n':
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight - deltaY);
                        newTop = app.dragOffset.startTop + deltaY;
                        break;
                    case 'se':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth + deltaX);
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight + deltaY);
                        break;
                    case 'sw':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth - deltaX);
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight + deltaY);
                        newLeft = app.dragOffset.startLeft + deltaX;
                        break;
                    case 'ne':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth + deltaX);
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight - deltaY);
                        newTop = app.dragOffset.startTop + deltaY;
                        break;
                    case 'nw':
                        newWidth = Math.max(minWidth, app.dragOffset.startWidth - deltaX);
                        newHeight = Math.max(minHeight, app.dragOffset.startHeight - deltaY);
                        newLeft = app.dragOffset.startLeft + deltaX;
                        newTop = app.dragOffset.startTop + deltaY;
                        break;
                }
                
                app.dragging.style.width = newWidth + 'px';
                app.dragging.style.height = newHeight + 'px';
                app.dragging.style.left = newLeft + 'px';
                app.dragging.style.top = newTop + 'px';
                
                const comp = findComponentByElement(app.dragging);
                if (comp) {
                    comp.width = newWidth;
                    comp.height = newHeight;
                    comp.x = newLeft;
                    comp.y = newTop;
                }
                
                updatePositionInfo(newLeft, newTop, newWidth, newHeight);
            }
        }

        function stopResize() {
            if (app.resizing) {
                app.resizing = false;
                app.dragging = null;
                document.removeEventListener('mousemove', doResize);
                document.removeEventListener('mouseup', stopResize);
                generateCode();
                log('‚úÖ Redimensionamento conclu√≠do', 'info');
            }
        }

        // Arrastar
        function startDrag(e) {
            if (e.target.classList.contains('resize-handle')) return;
            
            e.preventDefault();
            app.dragging = e.target;
            
            const rect = app.dragging.getBoundingClientRect();
            app.dragOffset.x = e.clientX - rect.left;
            app.dragOffset.y = e.clientY - rect.top;
            app.dragOffset.startX = parseFloat(app.dragging.style.left);
            app.dragOffset.startY = parseFloat(app.dragging.style.top);
            
            document.addEventListener('mousemove', doDrag);
            document.addEventListener('mouseup', stopDrag);
            
            log(`üëÜ Arrastando ${app.dragging.dataset.name}`, 'info');
        }

        function doDrag(e) {
            if (app.dragging && !app.resizing) {
                e.preventDefault();
                
                let screen, rect;
                if (app.currentDevice === 'pc') {
                    screen = document.getElementById('pcScreen');
                } else {
                    screen = document.getElementById('phoneScreen');
                }
                
                rect = screen.getBoundingClientRect();
                
                let x = e.clientX - rect.left - app.dragOffset.x;
                let y = e.clientY - rect.top - app.dragOffset.y;
                
                x = Math.max(0, Math.min(x, rect.width - app.dragging.offsetWidth));
                y = Math.max(app.currentDevice === 'mobile' ? 30 : 0, 
                           Math.min(y, rect.height - app.dragging.offsetHeight));
                
                app.dragging.style.left = x + 'px';
                app.dragging.style.top = y + 'px';
                
                const comp = findComponentByElement(app.dragging);
                if (comp) {
                    comp.x = x;
                    comp.y = y;
                }
                
                updatePositionInfo(x, y, comp?.width || 0, comp?.height || 0);
            }
        }

        function stopDrag() {
            if (app.dragging && !app.resizing) {
                app.dragging = null;
                document.removeEventListener('mousemove', doDrag);
                document.removeEventListener('mouseup', stopDrag);
                generateCode();
                log('‚úÖ Movimenta√ß√£o conclu√≠da', 'info');
            }
        }

        // Encontrar componente pelo elemento
        function findComponentByElement(element) {
            const deviceComponents = app.components[app.currentDevice];
            return deviceComponents.find(c => c.element === element);
        }

        // Sele√ß√£o de componente
        function selectComponent(element) {
            document.querySelectorAll('.universal-component').forEach(comp => {
                comp.classList.remove('selected');
            });
            
            element.classList.add('selected');
            app.selectedComponent = element;
            app.selectedComponentId = element.id;
            
            showComponentProperties(element);
            
            const comp = findComponentByElement(element);
            if (comp) {
                document.getElementById('selectedName').textContent = `${comp.name} (${comp.type})`;
                document.getElementById('selectionInfo').style.display = 'block';
                document.getElementById('selectionInfoBottom').textContent = 
                    `${comp.name} - ${comp.type}`;
                updatePositionInfo(comp.x, comp.y, comp.width, comp.height);
            }
        }

        function showComponentProperties(element) {
            const comp = findComponentByElement(element);
            if (!comp) return;
            
            const propsHtml = `
                <div class="prop-section">
                    <div class="prop-section-title">
                        <i class="fas fa-info-circle"></i> ${comp.name}
                    </div>
                    
                    <div class="prop-row">
                        <label>Nome (ID):</label>
                        <input type="text" value="${comp.name}" onchange="updateComponentProperty('${comp.id}', 'name', this.value)" style="background: rgba(255,255,255,0.1);">
                    </div>
                    
                    <div class="prop-row">
                        <label>Texto:</label>
                        <input type="text" value="${comp.properties.text || ''}" onchange="updateComponentProperty('${comp.id}', 'text', this.value)" style="background: rgba(255,255,255,0.1);">
                    </div>
                    
                    <div class="prop-row">
                        <label>Posi√ß√£o:</label>
                        <div class="prop-grid">
                            <div>
                                <label>X:</label>
                                <input type="number" value="${Math.round(comp.x)}" onchange="updateComponentPosition('${comp.id}', 'x', parseInt(this.value))" style="background: rgba(255,255,255,0.1);">
                            </div>
                            <div>
                                <label>Y:</label>
                                <input type="number" value="${Math.round(comp.y)}" onchange="updateComponentPosition('${comp.id}', 'y', parseInt(this.value))" style="background: rgba(255,255,255,0.1);">
                            </div>
                        </div>
                    </div>
                    
                    <div class="prop-row">
                        <label>Tamanho:</label>
                        <div class="prop-grid">
                            <div>
                                <label>Largura:</label>
                                <input type="number" value="${Math.round(comp.width)}" onchange="updateComponentSize('${comp.id}', 'width', parseInt(this.value))" style="background: rgba(255,255,255,0.1);">
                            </div>
                            <div>
                                <label>Altura:</label>
                                <input type="number" value="${Math.round(comp.height)}" onchange="updateComponentSize('${comp.id}', 'height', parseInt(this.value))" style="background: rgba(255,255,255,0.1);">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="prop-section">
                    <div class="prop-section-title">
                        <i class="fas fa-palette"></i> Apar√™ncia
                    </div>
                    
                    <div class="prop-row">
                        <label>Cor de Fundo:</label>
                        <input type="color" value="${comp.properties.background?.includes('#') ? 
                            comp.properties.background.match(/#[0-9A-F]{6}/i)?.[0] || '#2196F3' : '#2196F3'}" 
                            onchange="updateComponentStyle('${comp.id}', 'background', this.value)">
                    </div>
                    
                    <div class="prop-row">
                        <label>Cor do Texto:</label>
                        <input type="color" value="${comp.properties.color || '#FFFFFF'}" onchange="updateComponentStyle('${comp.id}', 'color', this.value)">
                    </div>
                    
                    <div class="prop-row">
                        <label>Tamanho da Fonte:</label>
                        <select onchange="updateComponentStyle('${comp.id}', 'fontSize', this.value + 'px')" style="background: rgba(255,255,255,0.1);">
                            <option value="12" ${comp.properties.fontSize === '12px' ? 'selected' : ''}>12px</option>
                            <option value="14" ${comp.properties.fontSize === '14px' || !comp.properties.fontSize ? 'selected' : ''}>14px</option>
                            <option value="16" ${comp.properties.fontSize === '16px' ? 'selected' : ''}>16px</option>
                            <option value="18" ${comp.properties.fontSize === '18px' ? 'selected' : ''}>18px</option>
                            <option value="20" ${comp.properties.fontSize === '20px' ? 'selected' : ''}>20px</option>
                            <option value="24" ${comp.properties.fontSize === '24px' ? 'selected' : ''}>24px</option>
                        </select>
                    </div>
                </div>
                
                <div class="prop-section">
                    <div class="prop-section-title">
                        <i class="fas fa-bolt"></i> A√ß√µes
                    </div>
                    
                    <div class="prop-row">
                        <button class="btn-secondary" style="width: 100%; margin-bottom: 12px; padding: 15px;" onclick="duplicateComponent('${comp.id}')">
                            <i class="fas fa-copy"></i> Duplicar Componente
                        </button>
                        <button class="btn-danger" style="width: 100%; padding: 15px;" onclick="deleteComponent('${comp.id}')">
                            <i class="fas fa-trash"></i> Excluir Componente
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('propsContent').innerHTML = propsHtml;
        }

        // Atualizar propriedades
        function updateComponentProperty(id, property, value) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            comp.properties[property] = value;
            
            if (property === 'name') {
                comp.name = value;
                comp.element.dataset.name = value;
                updateComponentList();
            } else if (property === 'text') {
                comp.element.innerHTML = value;
            }
            
            generateCode();
            log(`‚úèÔ∏è ${comp.name}: ${property} alterado`, 'info');
        }

        function updateComponentPosition(id, axis, value) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            comp[axis] = value;
            comp.element.style[axis] = value + 'px';
            updatePositionInfo(comp.x, comp.y, comp.width, comp.height);
            generateCode();
        }

        function updateComponentSize(id, dimension, value) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            comp[dimension] = value;
            comp.element.style[dimension] = value + 'px';
            updatePositionInfo(comp.x, comp.y, comp.width, comp.height);
            generateCode();
        }

        function updateComponentStyle(id, style, value) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            comp.properties[style] = value;
            
            if (style === 'background') {
                comp.element.style.background = value.includes('#') ? value : `linear-gradient(135deg, ${value}, ${value}DD)`;
            } else if (style === 'color') {
                comp.element.style.color = value;
            } else if (style === 'fontSize') {
                comp.element.style.fontSize = value;
            }
            
            log(`üé® ${comp.name}: ${style} alterado`, 'info');
        }

        // Encontrar componente por ID
        function findComponentById(id) {
            return app.components[app.currentDevice].find(c => c.id === id);
        }

        // Lista de componentes
        function updateComponentList() {
            const list = document.getElementById('componentList');
            const components = app.components[app.currentDevice];
            const count = document.getElementById('componentCount');
            const memoryInfo = document.getElementById('memoryInfo');
            
            count.textContent = components.length;
            memoryInfo.textContent = `Componentes: ${components.length}`;
            
            if (components.length === 0) {
                list.innerHTML = '<div style="padding: 25px; color: #b0b0b0; text-align: center; font-size: 0.95em;"><i class="fas fa-layer-group" style="color: #3DDC84; font-size: 2em; margin-bottom: 10px; display: block;"></i>Nenhum componente na tela</div>';
                return;
            }
            
            list.innerHTML = components.map(comp => `
                <div class="component-item ${app.selectedComponent === comp.element ? 'selected' : ''}" 
                     onclick="selectComponentById('${comp.id}')">
                    <div>
                        <strong style="font-size: 0.95em;">${comp.name}</strong>
                        <div style="font-size: 0.85em; color: #b0b0b0;">${comp.type}</div>
                    </div>
                    <div style="font-size: 0.85em; color: #3DDC84; background: rgba(61, 220, 132, 0.1); padding: 3px 8px; border-radius: 12px;">
                        ${Math.round(comp.width)}√ó${Math.round(comp.height)}
                    </div>
                </div>
            `).join('');
        }

        function selectComponentById(id) {
            const comp = findComponentById(id);
            if (comp) {
                selectComponent(comp.element);
            }
        }

        // Informa√ß√µes de status
        function updateStatusInfo() {
            const components = app.components[app.currentDevice];
            document.getElementById('componentCount').textContent = components.length;
        }

        function updatePositionInfo(x, y, w, h) {
            document.getElementById('positionInfo').textContent = 
                `X: ${Math.round(x)}, Y: ${Math.round(y)} | W: ${Math.round(w)}, H: ${Math.round(h)}`;
        }

        function updateDeviceInfo() {
            const deviceText = app.currentDevice === 'pc' ? 
                '<i class="fas fa-desktop"></i> Modo: PC' : 
                '<i class="fas fa-mobile-alt"></i> Modo: Mobile';
            document.getElementById('deviceInfo').innerHTML = deviceText;
            document.getElementById('deviceIcon').className = app.currentDevice === 'pc' ? 'fas fa-desktop' : 'fas fa-mobile-alt';
        }

        // A√ß√µes r√°pidas
        function deleteSelected() {
            if (app.selectedComponent) {
                const comp = findComponentByElement(app.selectedComponent);
                if (comp) {
                    deleteComponent(comp.id);
                }
            }
        }

        function deleteComponent(id) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            if (confirm(`Excluir ${comp.name}?`)) {
                comp.element.remove();
                app.components[app.currentDevice] = app.components[app.currentDevice].filter(c => c.id !== id);
                updateComponentList();
                updateStatusInfo();
                generateCode();
                document.getElementById('propsContent').innerHTML = `
                    <div style="color: #b0b0b0; padding: 40px; text-align: center; background: rgba(255,255,255,0.05); border-radius: 12px; margin-top: 20px;">
                        <i class="fas fa-mouse-pointer" style="font-size: 3.5em; margin-bottom: 20px; color: #3DDC84;"></i>
                        <h4 style="color: #3DDC84; margin-bottom: 15px;">Nenhum Componente Selecionado</h4>
                        <p>Clique em um componente na tela para editar suas propriedades</p>
                    </div>
                `;
                document.getElementById('selectionInfo').style.display = 'none';
                document.getElementById('selectionInfoBottom').textContent = 'Nenhum componente selecionado';
                log(`üóëÔ∏è ${comp.name} exclu√≠do`, 'warning');
            }
        }

        function duplicateComponent(id) {
            const comp = findComponentById(id);
            if (!comp) return;
            
            const newX = comp.x + 25;
            const newY = comp.y + 25;
            addComponent(comp.type, newX, newY, comp.properties);
            log(`üìã ${comp.name} duplicado`, 'info');
        }

        function duplicateSelected() {
            if (app.selectedComponent) {
                const comp = findComponentByElement(app.selectedComponent);
                if (comp) {
                    duplicateComponent(comp.id);
                }
            }
        }

        function alignSelected(alignment) {
            if (!app.selectedComponent) return;
            
            const screen = app.currentDevice === 'pc' ? 
                document.getElementById('pcScreen') : 
                document.getElementById('phoneScreen');
            const screenWidth = screen.offsetWidth;
            const comp = findComponentByElement(app.selectedComponent);
            
            if (comp) {
                switch(alignment) {
                    case 'left':
                        comp.x = 25;
                        break;
                    case 'center':
                        comp.x = (screenWidth - comp.width) / 2;
                        break;
                    case 'right':
                        comp.x = screenWidth - comp.width - 25;
                        break;
                }
                comp.element.style.left = comp.x + 'px';
                generateCode();
                log(`‚Üî ${comp.name} alinhado √† ${alignment === 'left' ? 'esquerda' : alignment === 'center' ? 'centro' : 'direita'}`, 'info');
            }
        }

        function clearAll() {
            const components = app.components[app.currentDevice];
            if (components.length === 0) return;
            
            if (confirm(`Limpar todos os ${components.length} componentes da tela?`)) {
                components.forEach(comp => comp.element.remove());
                app.components[app.currentDevice] = [];
                updateComponentList();
                updateStatusInfo();
                generateCode();
                document.getElementById('propsContent').innerHTML = `
                    <div style="color: #b0b0b0; padding: 40px; text-align: center; background: rgba(255,255,255,0.05); border-radius: 12px; margin-top: 20px;">
                        <i class="fas fa-mouse-pointer" style="font-size: 3.5em; margin-bottom: 20px; color: #3DDC84;"></i>
                        <h4 style="color: #3DDC84; margin-bottom: 15px;">Nenhum Componente Selecionado</h4>
                        <p>Clique em um componente na tela para editar suas propriedades</p>
                    </div>
                `;
                log('üóëÔ∏è Toda a tela foi limpa', 'warning');
            }
        }

        // Trocar dispositivo
        function switchDevice(device) {
            app.currentDevice = device;
            
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (device === 'pc') {
                document.getElementById('pcFrame').style.display = 'block';
                document.getElementById('phoneFrame').style.display = 'none';
            } else {
                document.getElementById('pcFrame').style.display = 'none';
                document.getElementById('phoneFrame').style.display = 'block';
            }
            
            updateDeviceInfo();
            updateComponentList();
            
            if (app.selectedComponent) {
                app.selectedComponent.classList.remove('selected');
                app.selectedComponent = null;
                document.getElementById('propsContent').innerHTML = `
                    <div style="color: #b0b0b0; padding: 40px; text-align: center; background: rgba(255,255,255,0.05); border-radius: 12px; margin-top: 20px;">
                        <i class="fas fa-mouse-pointer" style="font-size: 3.5em; margin-bottom: 20px; color: #3DDC84;"></i>
                        <h4 style="color: #3DDC84; margin-bottom: 15px;">Nenhum Componente Selecionado</h4>
                        <p>Clique em um componente na tela para editar suas propriedades</p>
                    </div>
                `;
            }
            
            log(`üì± Modo alterado para: ${device === 'pc' ? 'PC' : 'Mobile'}`, 'info');
        }

        // Gera√ß√£o de c√≥digo
        function generateCode() {
            let code = `// C√ìDIGO GERADO AUTOMATICAMENTE - UNIVERSAL DEV STUDIO v5.0\n`;
            code += `// Projeto: ${app.projectName}\n`;
            code += `// Dispositivo: ${app.currentDevice === 'pc' ? 'Desktop' : 'Mobile'}\n`;
            code += `// Data: ${new Date().toLocaleDateString()}\n`;
            code += `// Componentes: ${app.components[app.currentDevice].length}\n\n`;
            
            code += `// INICIALIZA√á√ÉO DO APLICATIVO\n`;
            code += `function initializeApp() {\n`;
            code += `    console.log("Inicializando ${app.projectName}...");\n\n`;
            
            app.components[app.currentDevice].forEach(comp => {
                code += `    // ${comp.name} - ${comp.type}\n`;
                code += `    const ${comp.name} = {\n`;
                code += `        type: "${comp.type}",\n`;
                code += `        position: { x: ${Math.round(comp.x)}, y: ${Math.round(comp.y)} },\n`;
                code += `        size: { width: ${Math.round(comp.width)}, height: ${Math.round(comp.height)} },\n`;
                code += `        properties: ${JSON.stringify(comp.properties, null, 8)}\n`;
                code += `    };\n\n`;
            });
            
            code += `    // CONFIGURA√á√ÉO DE EVENTOS\n`;
            app.components[app.currentDevice].filter(c => c.type === 'button').forEach(comp => {
                code += `    // Evento para ${comp.name}\n`;
                code += `    ${comp.name}.onClick = function() {\n`;
                code += `        console.log("${comp.name} clicado!");\n`;
                code += `        alert("${comp.properties.text || 'Bot√£o clicado'}");\n`;
                code += `    };\n\n`;
            });
            
            code += `    console.log("${app.projectName} inicializado com sucesso!");\n`;
            code += `}\n\n`;
            code += `// INICIALIZAR QUANDO A P√ÅGINA CARREGAR\n`;
            code += `window.addEventListener('load', initializeApp);\n\n`;
            code += `// EXPORTA√á√ÉO PARA DIFERENTES PLATAFORMAS\n`;
            code += `function exportToPlatform(platform) {\n`;
            code += `    switch(platform) {\n`;
            code += `        case 'windows':\n`;
            code += `            console.log("Exportando para Windows...");\n`;
            code += `            // C√≥digo para Windows Forms\n`;
            code += `            break;\n`;
            code += `        case 'android':\n`;
            code += `            console.log("Exportando para Android...");\n`;
            code += `            // C√≥digo para Android Studio\n`;
            code += `            break;\n`;
            code += `        case 'web':\n`;
            code += `            console.log("Exportando para Web...");\n`;
            code += `            // C√≥digo para Web App\n`;
            code += `            break;\n`;
            code += `    }\n`;
            code += `}\n`;
            
            app.currentCode = code;
            document.getElementById('codeEditor').textContent = code;
            updateLineNumbers();
        }

        function updateCode() {
            app.currentCode = document.getElementById('codeEditor').textContent;
        }

        function updateLineNumbers() {
            const editor = document.getElementById('codeEditor');
            const lineNums = document.getElementById('codeLineNums');
            const lines = editor.textContent.split('\n').length;
            let nums = '';
            for (let i = 1; i <= lines; i++) {
                nums += i + '\n';
            }
            lineNums.textContent = nums;
        }

        // Gerenciamento de projetos
        function loadProjects() {
            try {
                const saved = localStorage.getItem('universal_projects_v5');
                if (saved) {
                    app.projects = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Erro ao carregar projetos:', e);
                app.projects = [];
            }
        }

        function saveProjects() {
            try {
                localStorage.setItem('universal_projects_v5', JSON.stringify(app.projects));
            } catch (e) {
                console.error('Erro ao salvar projetos:', e);
            }
        }

        // Interface
        function selectProject(type) {
            app.projectType = type;
            document.querySelectorAll('.export-option').forEach(opt => opt.classList.remove('selected'));
            event.target.closest('.export-option').classList.add('selected');
            document.getElementById('startBtn').disabled = false;
        }

        function showNewProjectModal() {
            document.getElementById('newProjectModal').style.display = 'flex';
        }

        function createNewProject() {
            app.projectName = document.getElementById('projectName').value || 'Projeto Universal';
            app.projectId = `project_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            
            const platformCheckboxes = document.querySelectorAll('input[name="platform"]:checked');
            app.platforms = Array.from(platformCheckboxes).map(cb => cb.value);
            
            app.components.pc.forEach(comp => comp.element?.remove());
            app.components.mobile.forEach(comp => comp.element?.remove());
            app.components = { pc: [], mobile: [] };
            
            for (let key in app.counters) {
                app.counters[key] = 1;
            }
            
            closeModal('newProjectModal');
            startIDE();
            
            if (app.currentDevice === 'pc') {
                addComponent('label', 50, 50, {text: 'Aplicativo Universal', fontSize: '24px', fontWeight: 'bold', width: 350});
                addComponent('button', 50, 120, {text: 'Clique Aqui', width: 180});
                addComponent('textbox', 50, 190, {width: 350});
            } else {
                addComponent('label', 50, 80, {text: 'App Mobile', fontSize: '22px', fontWeight: 'bold', width: 280});
                addComponent('button', 50, 150, {text: 'Toque Aqui', width: 220});
                addComponent('textbox', 50, 230, {width: 280});
            }
            
            saveProject();
        }

        function startIDE() {
            document.getElementById('startup').style.display = 'none';
            document.getElementById('header').style.display = 'flex';
            document.getElementById('main').style.display = 'flex';
            document.getElementById('statusBar').style.display = 'flex';
            
            document.getElementById('projectNameDisplay').textContent = app.projectName;
            document.getElementById('configProjectName').value = app.projectName;
            
            switchDevice('pc');
            
            generateCode();
            updateComponentList();
            updateStatusInfo();
            
            log(`üöÄ Projeto "${app.projectName}" iniciado!`, 'info');
            log(`üì± Plataformas suportadas: ${app.platforms.join(', ')}`, 'info');
        }

        function openTab(tabName) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function saveProject() {
            const projectData = {
                id: app.projectId,
                name: app.projectName,
                type: app.projectType,
                platforms: app.platforms,
                date: new Date().toISOString(),
                components: {
                    pc: app.components.pc.map(comp => ({
                        id: comp.id,
                        name: comp.name,
                        type: comp.type,
                        x: comp.x,
                        y: comp.y,
                        width: comp.width,
                        height: comp.height,
                        properties: comp.properties
                    })),
                    mobile: app.components.mobile.map(comp => ({
                        id: comp.id,
                        name: comp.name,
                        type: comp.type,
                        x: comp.x,
                        y: comp.y,
                        width: comp.width,
                        height: comp.height,
                        properties: comp.properties
                    }))
                },
                settings: app.settings
            };
            
            const existingIndex = app.projects.findIndex(p => p.id === app.projectId);
            if (existingIndex >= 0) {
                app.projects[existingIndex] = projectData;
            } else {
                app.projects.push(projectData);
            }
            
            saveProjects();
            log(`üíæ Projeto "${app.projectName}" salvo com sucesso!`, 'info');
        }

        function testApp() {
            log('üß™ Iniciando teste do aplicativo...', 'info');
            
            setTimeout(() => {
                log('‚úÖ Aplicativo carregado com sucesso!', 'info');
                log('üìä Componentes na tela:', 'info');
                app.components[app.currentDevice].forEach(comp => {
                    log(`   ‚Ä¢ ${comp.name} (${comp.type}): ${comp.width}x${comp.height}`, 'info');
                });
                
                setTimeout(() => {
                    log('üéØ Teste conclu√≠do! Aplicativo funcionando perfeitamente.', 'info');
                }, 500);
            }, 1500);
        }

        function exportProject() {
            openTab('export');
        }

        function selectExportType(type) {
            app.exportType = type;
            document.querySelectorAll('.export-option').forEach(opt => opt.classList.remove('selected'));
            event.target.closest('.export-option').classList.add('selected');
            
            const configDiv = document.getElementById('exportConfig');
            const title = document.getElementById('exportConfigTitle');
            const button = document.getElementById('exportButton');
            
            configDiv.style.display = 'block';
            
            switch(type) {
                case 'windows':
                    title.innerHTML = '<i class="fab fa-windows"></i> Windows EXE';
                    button.innerHTML = '<i class="fas fa-download"></i> Gerar EXE';
                    break;
                case 'android':
                    title.innerHTML = '<i class="fab fa-android"></i> Android APK';
                    button.innerHTML = '<i class="fas fa-download"></i> Gerar APK';
                    break;
                case 'web':
                    title.innerHTML = '<i class="fas fa-globe"></i> Web App';
                    button.innerHTML = '<i class="fas fa-download"></i> Gerar Web App';
                    break;
                case 'all':
                    title.innerHTML = '<i class="fas fa-boxes"></i> Todos os Formatos';
                    button.innerHTML = '<i class="fas fa-download"></i> Exportar Tudo';
                    break;
            }
        }

        function resetExport() {
            document.getElementById('exportFileName').value = app.projectName;
            document.getElementById('exportVersion').value = '1.0.0';
            document.getElementById('exportCompress').checked = true;
            document.getElementById('exportSource').checked = true;
        }

        // EXPORTA√á√ÉO FUNCIONAL
        async function startExport() {
            log(`üì¶ Iniciando exporta√ß√£o para ${app.exportType}...`, 'build');
            
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('loadingTitle').textContent = `Exportando para ${app.exportType}`;
            
            try {
                updateProgress(10, 'Preparando arquivos...');
                
                // Carregar JSZip se necess√°rio
                if (typeof JSZip === 'undefined') {
                    await loadJSZip();
                }
                
                updateProgress(30, 'Gerando c√≥digo...');
                
                // Gerar projeto
                const zip = await generateProjectFiles();
                
                updateProgress(70, 'Criando arquivo ZIP...');
                
                // Gerar blob
                const content = await zip.generateAsync({type: "blob"});
                
                updateProgress(90, 'Iniciando download...');
                
                // Download
                const url = URL.createObjectURL(content);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${app.projectName}_${app.exportType}.zip`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                updateProgress(100, 'Exporta√ß√£o conclu√≠da!');
                
                setTimeout(() => {
                    document.getElementById('loading').style.display = 'none';
                    updateProgress(0, 'Pronto');
                    
                    log(`‚úÖ Projeto exportado com sucesso!`, 'info');
                    log(`üìÅ Arquivo: ${app.projectName}_${app.exportType}.zip`, 'info');
                    log(`üíæ Download iniciado automaticamente`, 'info');
                }, 1000);
                
            } catch (error) {
                console.error('Erro na exporta√ß√£o:', error);
                log(`‚ùå Erro ao exportar: ${error.message}`, 'error');
                document.getElementById('loading').style.display = 'none';
                updateProgress(0, 'Erro na exporta√ß√£o');
            }
        }

        async function loadJSZip() {
            return new Promise((resolve, reject) => {
                if (typeof JSZip !== 'undefined') {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                script.onload = resolve;
                script.onerror = () => reject(new Error('Falha ao carregar JSZip'));
                document.head.appendChild(script);
            });
        }

        async function generateProjectFiles() {
            const zip = new JSZip();
            const projectName = app.projectName.replace(/[^a-zA-Z0-9]/g, '');
            
            // Adicionar README
            zip.file(`README.txt`, `PROJETO GERADO POR UNIVERSAL DEV STUDIO v5.0

Nome do Projeto: ${app.projectName}
Plataformas: ${app.platforms.join(', ')}
Data de Gera√ß√£o: ${new Date().toLocaleString()}

COMPONENTES:
${app.components.pc.map(c => `  ‚Ä¢ ${c.name} (${c.type}) - ${c.width}x${c.height}`).join('\n')}

PARA WINDOWS:
1. Extraia o arquivo
2. Execute setup.exe
3. Siga as instru√ß√µes de instala√ß√£o

PARA ANDROID:
1. Transfira o APK para seu dispositivo
2. Habilite "Fontes desconhecidas"
3. Instale o APK

PARA WEB:
1. Extraia os arquivos
2. Abra index.html no navegador

Desenvolvido com Universal Dev Studio v5.0`);

            // Adicionar c√≥digo fonte
            zip.file(`${projectName}/source/app.js`, app.currentCode);
            
            // Adicionar HTML base
            let html = `<!DOCTYPE html>
<html>
<head>
    <title>${app.projectName}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .component { position: absolute; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>${app.projectName}</h1>
    <div id="app"></div>
    <script src="app.js"></script>
</body>
</html>`;
            
            zip.file(`${projectName}/source/index.html`, html);
            
            // Adicionar configura√ß√µes
            zip.file(`${projectName}/project.json`, JSON.stringify({
                name: app.projectName,
                platforms: app.platforms,
                components: app.components,
                settings: app.settings,
                version: '1.0.0',
                generated: new Date().toISOString()
            }, null, 2));
            
            return zip;
        }

        function showProjectManager() {
            loadProjects();
            const container = document.getElementById('existingProjects');
            
            if (app.projects.length === 0) {
                container.innerHTML = '<div style="padding: 50px; text-align: center; color: #b0b0b0; font-size: 1.1em;"><i class="fas fa-folder-open" style="font-size: 3em; margin-bottom: 20px; color: #3DDC84; display: block;"></i>Nenhum projeto salvo</div>';
            } else {
                container.innerHTML = app.projects.map(project => `
                    <div class="project-item" onclick="selectProjectFromList('${project.id}')" id="project_${project.id}">
                        <strong style="font-size: 1.1em; color: #ffffff;">${project.name}</strong>
                        <div style="font-size: 0.95em; color: #b0b0b0; margin-top: 8px;">
                            <i class="fas fa-layer-group"></i> ${project.type} | 
                            <i class="fas fa-mobile-alt"></i> ${project.platforms.length} plataformas
                        </div>
                        <div style="font-size: 0.9em; color: #3DDC84; margin-top: 8px;">
                            <i class="fas fa-calendar"></i> ${new Date(project.date).toLocaleDateString()} - 
                            <i class="fas fa-cube"></i> ${(project.components?.pc?.length || 0) + (project.components?.mobile?.length || 0)} componentes
                        </div>
                    </div>
                `).join('');
            }
            
            document.getElementById('projectTemplates').style.display = 'none';
            document.getElementById('projectManager').style.display = 'block';
        }

        function selectProjectFromList(id) {
            app.selectedProjectId = id;
            document.querySelectorAll('.project-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.getElementById(`project_${id}`).classList.add('selected');
            document.getElementById('loadProjectBtn').disabled = false;
            document.getElementById('deleteProjectBtn').disabled = false;
        }

        function loadSelectedProject() {
            if (!app.selectedProjectId) return;
            
            const project = app.projects.find(p => p.id === app.selectedProjectId);
            if (project) {
                loadProject(project);
                showProjectTemplates();
            }
        }

        function loadProject(project) {
            app.projectId = project.id;
            app.projectName = project.name;
            app.projectType = project.type;
            app.platforms = project.platforms;
            app.settings = project.settings || app.settings;
            
            app.components.pc.forEach(comp => comp.element?.remove());
            app.components.mobile.forEach(comp => comp.element?.remove());
            app.components = { pc: [], mobile: [] };
            
            for (let key in app.counters) {
                app.counters[key] = 1;
            }
            
            if (project.components?.pc) {
                project.components.pc.forEach(compData => {
                    const comp = addComponent(compData.type, compData.x, compData.y, compData.properties);
                    if (comp) {
                        comp.id = compData.id;
                        comp.width = compData.width;
                        comp.height = compData.height;
                        comp.element.style.width = compData.width + 'px';
                        comp.element.style.height = compData.height + 'px';
                    }
                });
            }
            
            const currentDevice = app.currentDevice;
            switchDevice('mobile');
            
            if (project.components?.mobile) {
                project.components.mobile.forEach(compData => {
                    const comp = addComponent(compData.type, compData.x, compData.y, compData.properties);
                    if (comp) {
                        comp.id = compData.id;
                        comp.width = compData.width;
                        comp.height = compData.height;
                        comp.element.style.width = compData.width + 'px';
                        comp.element.style.height = compData.height + 'px';
                    }
                });
            }
            
            switchDevice(currentDevice);
            
            document.getElementById('startup').style.display = 'none';
            document.getElementById('header').style.display = 'flex';
            document.getElementById('main').style.display = 'flex';
            document.getElementById('statusBar').style.display = 'flex';
            
            document.getElementById('projectNameDisplay').textContent = app.projectName;
            document.getElementById('configProjectName').value = app.projectName;
            
            if (app.settings.pcWidth && app.settings.pcHeight) {
                document.getElementById('configPcWidth').value = app.settings.pcWidth;
                document.getElementById('configPcHeight').value = app.settings.pcHeight;
            }
            
            generateCode();
            updateComponentList();
            updateStatusInfo();
            
            log(`üìÇ Projeto "${project.name}" carregado com sucesso!`, 'info');
        }

        function deleteSelectedProject() {
            if (!app.selectedProjectId) return;
            
            if (confirm('Excluir este projeto permanentemente?')) {
                app.projects = app.projects.filter(p => p.id !== app.selectedProjectId);
                saveProjects();
                showProjectManager();
                app.selectedProjectId = null;
                log('üóëÔ∏è Projeto exclu√≠do permanentemente', 'warning');
            }
        }

        function showProjectTemplates() {
            document.getElementById('projectManager').style.display = 'none';
            document.getElementById('projectTemplates').style.display = 'block';
            app.selectedProjectId = null;
        }

        function setupEventListeners() {
            document.getElementById('pcScreen').addEventListener('click', (e) => {
                if (e.target === document.getElementById('pcScreen')) {
                    clearSelection();
                }
            });
            
            document.getElementById('phoneScreen').addEventListener('click', (e) => {
                if (e.target === document.getElementById('phoneScreen') || 
                    e.target.classList.contains('status-bar')) {
                    clearSelection();
                }
            });
            
            document.getElementById('designer').addEventListener('mousemove', (e) => {
                if (app.dragging || app.resizing) return;
                
                let screen, rect;
                if (app.currentDevice === 'pc') {
                    screen = document.getElementById('pcScreen');
                } else {
                    screen = document.getElementById('phoneScreen');
                }
                
                rect = screen.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {
                    document.getElementById('positionInfo').textContent = 
                        `X: ${Math.round(x)}, Y: ${Math.round(y)}`;
                }
            });
        }

        function clearSelection() {
            if (app.selectedComponent) {
                app.selectedComponent.classList.remove('selected');
                app.selectedComponent = null;
                app.selectedComponentId = null;
                document.getElementById('propsContent').innerHTML = `
                    <div style="color: #b0b0b0; padding: 40px; text-align: center; background: rgba(255,255,255,0.05); border-radius: 12px; margin-top: 20px;">
                        <i class="fas fa-mouse-pointer" style="font-size: 3.5em; margin-bottom: 20px; color: #3DDC84;"></i>
                        <h4 style="color: #3DDC84; margin-bottom: 15px;">Nenhum Componente Selecionado</h4>
                        <p>Clique em um componente na tela para editar suas propriedades</p>
                    </div>
                `;
                document.getElementById('selectionInfo').style.display = 'none';
                document.getElementById('selectionInfoBottom').textContent = 'Nenhum componente selecionado';
            }
        }

        function updateProjectConfig() {
            app.projectName = document.getElementById('configProjectName').value;
            document.getElementById('projectNameDisplay').textContent = app.projectName;
            generateCode();
            log('‚úèÔ∏è Configura√ß√µes do projeto atualizadas', 'info');
        }

        function updateScreenBackground() {
            const color = document.getElementById('configBackground').value;
            document.getElementById('pcScreen').style.background = color;
            document.getElementById('phoneScreen').style.background = color;
            app.settings.backgroundColor = color;
            log('üé® Cor de fundo da tela atualizada', 'info');
        }

        function updateTheme() {
            const theme = document.getElementById('configTheme').value;
            app.settings.theme = theme;
            log(`üé® Tema alterado para: ${theme}`, 'info');
        }

        function updatePcSize() {
            const width = parseInt(document.getElementById('configPcWidth').value) || 850;
            const height = parseInt(document.getElementById('configPcHeight').value) || 650;
            
            app.settings.pcWidth = width;
            app.settings.pcHeight = height;
            
            document.getElementById('pcFrame').style.width = width + 'px';
            document.getElementById('pcFrame').style.height = height + 'px';
            
            log(`üìê Tamanho da tela PC atualizado: ${width}x${height}`, 'info');
        }

        // Inicializar
        window.onload = init;
    </script>
</body>
</html>